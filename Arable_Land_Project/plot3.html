<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Arable land (hectares)" aggregated by continent over the years</title>
  <script src="../d3/d3.min.js" charset="utf-8"></script>
  <style>
  .bar {
    fill:steelblue;
  }

  .bar:hover {
    fill:brown;
  }

  .axis {
    font:10px sans-serif;
  }

  .axis path, .axis line {
    fill:none;
    stroke:#000;
    shape-rendering:crispEdges;
  }

  svg {
    margin-left:80px;
    margin-right: auto;
    margin-top:80px;
  }
  </style>
</head>
<body>
  <script>
  //Defining dimensions of graph container
  var margin = {top: 40, right: 40, bottom: 80, left: 80},
      width = 1200 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

  //Define Year Format
  var parseYear = d3.time.format("%Y").parse;

  //Setting the ranges
  var x = d3.scale.ordinal().rangeRoundBands([0,width],0.15);
  var y = d3.scale.linear().range([height,0]);

  //Defining the axes
  var xAxis = d3.svg.axis()
                    .scale(x)
                    .orient("bottom");

  var yAxis = d3.svg.axis()
                    .scale(y)
                    .orient("left")
                    .ticks(10);

  //Adding the svg elements 6 Graphs
  var svg = [];
  for(var ijk=0;ijk<6;ijk++) {

    //Loading the data
    var jsonFileName;
    if(ijk===0) {jsonFileName = "reqTotalHectaresByContinentAF.json";}
    else if(ijk===1) {jsonFileName = "reqTotalHectaresByContinentAS.json";}
    else if(ijk===2) {jsonFileName = "reqTotalHectaresByContinentEU.json";}
    else if(ijk===3) {jsonFileName = "reqTotalHectaresByContinentNA.json";}
    else if(ijk===4) {sonFileName = "reqTotalHectaresByContinentOC.json";}
    else  {jsonFileName = "reqTotalHectaresByContinentSA.json";}

    d3.json(jsonFileName,function(data){
      data.forEach(function(d){
        d.year = d.YEAR;
        d.value = parseFloat(d.VALUE);
      });


      svg = d3.select("body").append("svg")
                      .attr("width",width+margin.left+margin.right)
                      .attr("height",height+margin.top+margin.bottom)
                      .append("g")
                      .attr("transform","translate("+margin.left+","+margin.top+")");

      //Scale the range of data
      x.domain(data.map(function(d){return d.year;}));
      y.domain([0,d3.max(data,function(d){return d.value;})]);

      //debugger;
      //Add axis
      svg.append("g")
        .attr("class", "x axis")
        .attr("transform","translate(0,"+height+")")
        .call(xAxis)
        .selectAll("text")
        .style("text-anchor","end")
        .attr("dx","-0.8em")
        .attr("dy","-0.6em")
        .attr("transform","rotate(-90)");

      svg.append("g")
        .attr("class", "y axis")
        .call(yAxis)
        .append("text")
        .attr("transform","rotate(-90)")
        .attr("y",15)
        .attr("x",0)
        .style("text-anchor","end")
        .attr("font-size","12")
        .text("Arable land (hectares) aggregated by continent over the years");

      //Adding bars
      svg.selectAll("bar")
        .data(data)
        .enter().append("rect")
        .attr("class", "bar")
        .attr("x",function(d){return x(d.year);})
        .attr("width",x.rangeBand())
        .attr("y",function(d){return y(d.value);})
        .attr("height",function(d){return height-y(d.value);})

    });
  }
  </script>

</body>
</html>
